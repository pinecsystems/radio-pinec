<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1100">
    <title>Radio.95 Pinec | February Sound</title>
    <link rel="icon" type="image/png" href="LOGO.png">
    <style>
        :root {
            --glow-green: #00ff41;
            --dim-green: #003300;
            --lcd-bg: rgba(5, 10, 5, 0.95);
            --ad-bg: rgba(15, 15, 15, 0.9);
        }

        body {
            background-color: #000;
            margin: 0; padding: 0; min-width: 1100px; 
            font-family: 'Courier New', Courier, monospace;
            overflow-x: auto; color: white;
        }

        #earthbound-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; filter: contrast(1.2) brightness(0.6);
        }

        #power-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 2000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer;
        }
        #power-btn {
            width: 100px; height: 100px; border-radius: 50%;
            border: 3px solid var(--glow-green); color: var(--glow-green);
            display: flex; align-items: center; justify-content: center;
            font-size: 2.5rem; text-shadow: 0 0 20px var(--glow-green);
        }

        #top-ad-slot {
            width: 468px; background: var(--ad-bg); border: 1px solid #444;
            display: flex; flex-direction: column; padding: 4px; margin: 20px auto;
            position: relative; height: 60px; justify-content: center; align-items: center;
        }
        .ad-header { font-size: 9px; color: #666; margin-bottom: 2px; text-transform: uppercase; letter-spacing: 1px; text-align: center; position: absolute; top: 6px; width: 100%;}
        
        #slot1-text {
            color: var(--glow-green); font-size: 14px; text-align: center;
            font-weight: bold; text-transform: uppercase;
            transition: opacity 0.8s; width: 90%;
            text-shadow: 0 0 5px var(--glow-green);
            margin-top: 10px;
        }

        .ad-container {
            width: 100%; background: #000; position: relative; 
            overflow: hidden; border: 1px solid #333; cursor: pointer;
        }
        .box-s { aspect-ratio: 1/1; }
        
        .ad-image { 
            width: 100%; height: 100%; object-fit: cover; position: absolute; 
            top:0; left:0; z-index: 5; opacity: 0; transition: opacity 1s ease-in-out; 
        }
        .ad-image.active { opacity: 1; }

        #main-layout {
            display: grid; grid-template-columns: 180px 700px 180px;
            gap: 20px; justify-content: center; align-items: start;
            padding: 20px; width: 1100px; margin: 0 auto;
        }

        .side-rail { display: flex; flex-direction: column; gap: 15px; padding-top: 40px; }

        .placeholder-text {
            color: var(--glow-green); font-size: 10px; text-transform: uppercase;
            font-weight: bold; padding: 10px; text-shadow: 0 0 5px var(--glow-green);
            line-height: 1.4; z-index: 1; text-align: center;
        }

        #deck {
            background: #1a1a1a; border: 2px solid #333; border-bottom: 15px solid #000;
            padding: 45px; position: relative; box-shadow: 0 40px 80px rgba(0,0,0,1);
        }

        .logo-container { position: absolute; top: 10px; left: 45px; display: flex; align-items: center; gap: 10px; }
        .logo-img { height: 24px; width: auto; image-rendering: pixelated; }
        .branding { font-size: 0.6rem; color: #444; letter-spacing: 6px; margin: 0; }

        .screen-bezel { background: #000; padding: 15px; border: 4px solid #111; margin-bottom: 30px; margin-top: 10px; }
        .vfd-display { background: var(--lcd-bg); border: 1px solid var(--dim-green); position: relative; overflow: hidden; display: flex; flex-direction: column; }

        #viz-container { height: 140px; border-bottom: 1px solid var(--dim-green); background: rgba(0, 5, 0, 0.8); }
        #viz-canvas { width: 100%; height: 100%; image-rendering: pixelated; }

        .track-info { padding: 15px 25px; height: 80px; display: flex; flex-direction: column; justify-content: center; }
        #song-title { font-size: 1.4rem; color: #fff; text-shadow: 0 0 10px var(--glow-green); margin: 0; white-space: nowrap; overflow: hidden; }
        #artist-name { font-size: 0.8rem; color: var(--glow-green); opacity: 0.8; margin: 6px 0 0 0; letter-spacing: 3px; }

        .controls { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px; }
        .btn-analog {
            background: linear-gradient(180deg, #2a2a2a, #111); border: 1px solid #333; color: #777;
            padding: 14px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase;
            cursor: pointer; text-decoration: none; text-align: center; box-shadow: 0 4px 0 #000; transition: 0.1s;
        }
        .btn-analog:active { transform: translateY(3px); box-shadow: 0 1px 0 #000; color: var(--glow-green); }

        .scanlines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%); background-size: 100% 3px; pointer-events: none; z-index: 10; }
        #status-bar { display: flex; justify-content: space-between; font-size: 0.65rem; color: var(--dim-green); margin-top: 20px; text-transform: uppercase; }
        input[type=range] { -webkit-appearance: none; background: transparent; width: 80px; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 2px; background: var(--dim-green); }
        input[type=range]::-webkit-slider-thumb { border: 1px solid var(--glow-green); height: 12px; width: 12px; background: #000; -webkit-appearance: none; margin-top: -5px; cursor: pointer; }
    </style>
</head>
<body>
    <canvas id="earthbound-bg"></canvas>

    <div id="power-overlay">
        <div id="power-btn">‚èª</div>
        <p style="margin-top:20px; letter-spacing: 5px; font-size: 0.7rem; color: var(--dim-green);">INITIALIZE SIGNAL</p>
    </div>

    <div id="top-ad-slot">
        <div class="ad-header">PERMANENT SUPPORTERS</div>
        <div id="slot1-text">WELCOME TO RADIO PINEC</div>
        <div class="scanlines"></div>
    </div>

    <div id="main-layout">
        <div class="side-rail">
            <div id="slot2" class="ad-container box-s">
                <div class="placeholder-text">MONTHLY SPONSOR<br><span style="color:#fff">$15.00 / MO</span></div>
            </div>
            <div style="font-size: 9px; color: #222; text-align: center; letter-spacing: 2px;">V.95-X REVISION</div>
        </div>

        <div id="deck">
            <div class="logo-container">
                <img src="LOGO.png" alt="LOGO" class="logo-img" onerror="this.style.display='none'">
                <h1 class="branding">PINEC AUDIO SYSTEMS // MODEL 95-X</h1>
            </div>
            <div class="screen-bezel">
                <div class="vfd-display">
                    <div class="scanlines"></div>
                    <div id="viz-container"><canvas id="viz-canvas"></canvas></div>
                    <div class="track-info">
                        <p id="song-title">NO SIGNAL</p>
                        <p id="artist-name">TUNING...</p>
                    </div>
                </div>
            </div>
            <div class="controls">
                <a href="https://linktr.ee/PinecSystems" target="_blank" class="btn-analog">Linktree</a>
                <a href="https://discord.gg/7C8NU8fa2x" target="_blank" class="btn-analog">Discord</a>
                <button class="btn-analog" id="submit-btn">Submit Song</button>
                <button class="btn-analog" id="viz-cycle-btn">VFD BARS</button>
            </div>
            <div id="status-bar">
                <span>95.00 MHZ FM STEREO</span>
                <span style="display: flex; align-items: center; gap: 10px;">VOL <input type="range" id="vol" min="0" max="1" step="0.1" value="0.8"></span>
            </div>
        </div>

        <div class="side-rail">
            <div id="slot3" class="ad-container box-s">
                <div class="placeholder-text">MONTHLY SPONSOR<br><span style="color:#fff">$15.00 / MO</span></div>
            </div>
        </div>
    </div>

    <audio id="player"></audio>

    <script type="module">
        /* --- SPONSOR DATABASE (MANUAL UPDATE) --- */
        const sponsorData = {
            slot1: ["WELCOME TO RADIO PINEC", "SUPPORT THE SIGNAL", "STAY CONNECTED"],
            slot2: [],
            slot3: []
        };

        /* --- PLAYLIST DATABASE (MANUAL UPDATE) --- */
        let playlist = [
            { title: "Ascension", artist: "PINEC", src: "https://files.catbox.moe/0bkex3.mp3" },
            { title: "Set my world on fire", artist: "PINEC", src: "https://files.catbox.moe/738s8p.mp3" },
            { title: "Broken Transmission", artist: "PINEC", src: "https://files.catbox.moe/3pvltb.mp3" },
            { title: "Casio Watch", artist: "PINEC", src: "https://files.catbox.moe/rpzcsj.mp3" },
            { title: "Pinec Tape 1", artist: "PINEC", src: "https://files.catbox.moe/mgm98o.mp3" },
            { title: "Aya Lin", artist: "PINEC", src: "https://files.catbox.moe/oc7o5r.mp3" },
            { title: "Opposition", artist: "PINEC", src: "https://files.catbox.moe/pr2yci.mp3" },
            { title: "Fever Dream", artist: "PINEC", src: "https://files.catbox.moe/aie1da.mp3" },
            { title: "Eternal Love", artist: "PINEC", src: "https://files.catbox.moe/ujjb3l.mp3" },
            { title: "SoulBound", artist: "PINEC", src: "https://files.catbox.moe/9ag9ry.m4a" }
        ];

        let adIndices = { slot1: 0, slot2: 0, slot3: 0 };
        let isRunning = false;
        let currentTrackIndex = 0;
        let time = 0;
        let vizMode = 0; 
        const vizModes = ["VFD BARS", "OSCILLOSCOPE", "SPECTRUM"];

        const audio = document.getElementById('player');
        const vizCanvas = document.getElementById('viz-canvas');
        const vizCtx = vizCanvas.getContext('2d');
        const bgCanvas = document.getElementById('earthbound-bg');
        const bgCtx = bgCanvas.getContext('2d');
        
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function loadTrack(index) {
            const track = playlist[index];
            audio.src = track.src;
            document.getElementById('song-title').innerText = track.title.toUpperCase();
            document.getElementById('artist-name').innerText = track.artist.toUpperCase();
            audio.load(); audio.play().catch(() => {});
        }

        audio.onended = () => {
            currentTrackIndex++;
            if (currentTrackIndex >= playlist.length) {
                currentTrackIndex = 0; shuffle(playlist);
            }
            loadTrack(currentTrackIndex);
        };

        window.bootRadio = function() {
            if (isRunning) return;
            document.getElementById('power-overlay').style.display = 'none';
            isRunning = true;
            shuffle(playlist);
            renderStaticAds();
            loadTrack(currentTrackIndex);
            setInterval(rotateAds, 8000);
            animate();
        };

        function renderStaticAds() {
            ['slot2', 'slot3'].forEach(slotId => {
                const container = document.getElementById(slotId);
                const list = sponsorData[slotId];
                if (list.length > 0) {
                    const placeholder = container.querySelector('.placeholder-text');
                    if (placeholder) placeholder.style.display = 'none';
                    list.forEach((item, idx) => {
                        const img = document.createElement('img');
                        img.src = item.img;
                        img.className = `ad-image ${idx === 0 ? 'active' : ''}`;
                        img.onclick = (e) => { e.stopPropagation(); if(item.link) window.open(item.link, '_blank'); };
                        container.appendChild(img);
                    });
                }
            });
        }

        function rotateAds() {
            ['slot2', 'slot3'].forEach(slotId => {
                const list = sponsorData[slotId];
                if (list.length <= 1) return;
                const container = document.getElementById(slotId);
                const imgs = container.querySelectorAll('.ad-image');
                if (imgs[adIndices[slotId]]) imgs[adIndices[slotId]].classList.remove('active');
                adIndices[slotId] = (adIndices[slotId] + 1) % list.length;
                if (imgs[adIndices[slotId]]) imgs[adIndices[slotId]].classList.add('active');
            });

            const topList = sponsorData.slot1;
            if (topList.length > 1) {
                const display = document.getElementById('slot1-text');
                display.style.opacity = 0;
                setTimeout(() => {
                    adIndices.slot1 = (adIndices.slot1 + 1) % topList.length;
                    display.innerText = topList[adIndices.slot1];
                    display.style.opacity = 1;
                }, 800);
            }
        }

        function drawEBBackground() {
            if (bgCanvas.width !== window.innerWidth || bgCanvas.height !== window.innerHeight) {
                bgCanvas.width = window.innerWidth; bgCanvas.height = window.innerHeight;
            }
            const w = bgCanvas.width, h = bgCanvas.height, t = time * 0.4;
            const hue1 = (Math.sin(t * 0.1) * 50 + 220); 
            for (let y = 0; y < h; y += 12) {
                bgCtx.fillStyle = `hsl(${(hue1 + y/12) % 360}, 60%, 8%)`;
                bgCtx.fillRect(0, y, w, 12);
            }
            bgCtx.globalCompositeOperation = 'lighter';
            for (let x = 0; x < w; x += 60) {
                const waveX = Math.cos(t * 0.5 + x * 0.004) * 30;
                bgCtx.fillStyle = `hsla(260, 80%, 15%, 0.1)`;
                bgCtx.fillRect(x + waveX, 0, 20, h);
            }
            bgCtx.globalCompositeOperation = 'source-over';
        }

        function drawVisualizer() {
            if (vizCanvas.width !== vizCanvas.offsetWidth || vizCanvas.height !== vizCanvas.offsetHeight) {
                vizCanvas.width = vizCanvas.offsetWidth; vizCanvas.height = vizCanvas.offsetHeight;
            }
            vizCtx.clearRect(0, 0, vizCanvas.width, vizCanvas.height);
            const w = vizCanvas.width, h = vizCanvas.height;
            if (vizMode === 0) {
                const bars = 20; const barW = (w / bars) - 6;
                for (let i = 0; i < bars; i++) {
                    const val = audio.paused ? 5 : Math.abs(Math.sin(time + i * 0.3) * (h/2.2) + Math.random() * 15);
                    vizCtx.fillStyle = `rgb(0, ${180 + val}, 60)`;
                    vizCtx.fillRect(i * (barW + 6) + 3, h - val, barW, val);
                }
            } else if (vizMode === 1) {
                vizCtx.beginPath(); vizCtx.strokeStyle = "#00ff41"; vizCtx.lineWidth = 2; vizCtx.moveTo(0, h/2);
                for (let x = 0; x < w; x += 5) {
                    const amp = audio.paused ? 2 : (h/4);
                    vizCtx.lineTo(x, (h/2) + Math.sin(time * 4 + x * 0.06) * amp);
                }
                vizCtx.stroke();
            } else {
                const bars = 10; const barW = (w / (bars * 2.8));
                for (let i = 0; i < bars; i++) {
                    const val = audio.paused ? 12 : Math.abs(Math.sin(time * 0.6 + i * 0.4) * (h/1.8)) + 8;
                    vizCtx.fillStyle = `rgb(0, 220, 90)`;
                    vizCtx.fillRect(w/2 + (i * barW * 2.8), h/2 - val/2, barW, val);
                    vizCtx.fillRect(w/2 - (i * barW * 2.8) - barW, h/2 - val/2, barW, val);
                }
            }
        }

        function animate() {
            if(!isRunning) return;
            requestAnimationFrame(animate);
            time += 0.05;
            drawEBBackground();
            drawVisualizer();
        }

        document.getElementById('viz-cycle-btn').onclick = (e) => {
            vizMode = (vizMode + 1) % vizModes.length;
            e.target.innerText = vizModes[vizMode];
        };
        document.getElementById('vol').oninput = (e) => audio.volume = e.target.value;
        document.getElementById('submit-btn').onclick = () => window.open('https://forms.gle/uBHk7PNrrbyAfoc49', '_blank');
        document.getElementById('power-overlay').onclick = () => window.bootRadio();
    </script>
</body>
</html>
